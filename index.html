<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz Application</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<!-- <style>
  :root{
    --primary:#1e88e5;
    --accent:#26a69a;
    --bg:#f4f7fa;
    --card:#fff;
    --muted:#6b7280;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter, system-ui, "Segoe UI", Roboto, Arial;
    background:var(--bg); color:#111;
  }
  .page{display:none; padding:24px; max-width:1200px; margin:0 auto;}
  .page.active{display:block}
  header.app-header{display:flex;align-items:center;gap:12px;padding:18px 0}
  header h1{margin:0;font-size:1.6rem;color:var(--primary)}
  .subtle {color:var(--muted);font-size:.95rem}
  .landing {display:flex;flex-direction:column;align-items:center;gap:18px;min-height:60vh;justify-content:center}
  .role-row{display:flex;gap:24px;flex-wrap:wrap;justify-content:center}
  .role-card{
    background:var(--card); border-radius:12px; padding:32px 48px; min-width:220px;
    text-align:center; box-shadow:0 6px 20px rgba(30,30,30,.06); cursor:pointer;
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .role-card:hover{transform:translateY(-6px); box-shadow:0 12px 30px rgba(30,30,30,.09)}
  .role-card h2{margin:0;color:var(--primary)}
  .role-card p{margin:8px 0 0;color:var(--muted)}
  .card {background:var(--card); padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.06); max-width:720px; margin:14px auto}
  .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .form-grid .full{grid-column:1/-1}
  label{display:block;font-size:.9rem;margin-bottom:6px;color:#222}
  input[type=text], input[type=email], input[type=password], input[type=tel], input[type=number], select, textarea{
    width:100%; padding:10px;border:1px solid #ddd;border-radius:8px;font-size:1rem;
  }
  .form-actions{display:flex;gap:10px;align-items:center;margin-top:14px}
  /* button.btn{background:var(--primary); color:white; padding:10px 14px;border:none;border-radius:8px;cursor:pointer} */
  /* button.ghost{background:transparent;border:1px solid #ddd;color:#333} */
  .link{color:var(--primary);cursor:pointer;text-decoration:underline;font-size:.95rem}
  .dash-header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:14px}
  .controls{display:flex;gap:10px;align-items:center}
  .subject-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
  .subject-card{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:12px;padding:14px;box-shadow:0 10px 28px rgba(0,0,0,.06);min-height:160px;display:flex;flex-direction:column;justify-content:space-between}
  .subject-card h3{margin:0;color:var(--primary)}
  .subject-meta{color:var(--muted);font-size:.9rem;margin-top:6px}
  .subject-actions{display:flex;gap:8px;margin-top:10px;align-items:center}
  .btn-sm{padding:8px 10px;border-radius:8px;font-size:.9rem}
  .badge{background:#e6f2ff;color:var(--primary);padding:6px 8px;border-radius:8px;font-weight:600}
  .module-list{display:flex;flex-direction:column;gap:10px;margin-top:12px}
  .module-item{background:#fff;border-radius:8px;padding:10px;border:1px solid #eef2f6;display:flex;justify-content:space-between;align-items:center}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:1000}
  .modal{background:#fff;border-radius:12px;padding:18px;max-width:780px;width:95%;max-height:90vh;overflow:auto}
  .q-card{background:#f9fafb;padding:12px;border-radius:10px;border:1px solid #eee;margin-bottom:12px}
  .q-card textarea {min-height: 40px; font-size: 1rem; padding: 6px;}
  .option-group{display:grid; grid-template-columns: auto 1fr; gap:8px; align-items:center; margin-top:8px;}
  @media(max-width:720px){
    .form-grid{grid-template-columns:1fr}
    .role-card{padding:22px}
    header h1{font-size:1.2rem}
  }
  .muted{color:var(--muted)}
  .center{text-align:center}
  .mt8{margin-top:8px}


  /* Styles for the new admin stat cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}
.stat-card {
    background: var(--card);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,.05);
}
.stat-card i {
    font-size: 2.5rem;
    color: var(--primary);
    opacity: 0.7;
}
.stat-value {
    font-size: 2rem;
    font-weight: 700;
}
.stat-label {
    font-size: 0.9rem;
    color: var(--muted);
}

.pagination-controls {
    display: flex;
    justify-content: end;
    align-items: center;
    gap: 10px;
    margin-top: 16px;
}

/* --- Styles for Admin Search and Pagination --- */

/* Style for the search input fields */
#teacherSearch, #studentSearch {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 0.95rem;
    transition: box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

/* Add a subtle blue glow when the search box is focused */
#teacherSearch:focus, #studentSearch:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.2); /* Using your --primary color */
    border-color: var(--primary);
}

/* Style for the pagination container */
.pagination-controls {
    display: flex;
    justify-content: flex-end; /* Aligns items to the right */
    align-items: center;
    gap: 10px;
    margin-top: 16px;
    font-size: 0.9rem;
    color: var(--muted);
}

/* Style for the disabled Previous/Next buttons */
.pagination-controls button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: transparent;
}
</style> -->

<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

<link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="main-nav">
    <div class="nav-container">
        <div class="nav-brand">
          <img src="images/quiz.png" alt="App Logo" class="nav-logo">
          <span>Department Quiz Application</span>
        </div>
        <div class="nav-links">
          <a href="#" id="homeLink" class="nav-item">Home</a>
          <a href="#" id="aboutLink" class="nav-item">About</a>
        <div id="userBadge"></div>
      </div>
    </div>
</nav>

<section id="landing" class="page active">
    <div class="hero-section">
        <h1>The Smart, Simple Quiz Platform</h1>
        <p class="lead">
            Create, share, and analyze quizzes with ease. Perfect for any classroom or department.
        </p>
        <button id="getStartedBtn" class="btn-hero">Select a Role Below</button>
    </div>

    <div class="container">
        <div class="role-row">
            <div class="role-card" id="openTeacher">
                <i class="bi bi-person-video3 role-icon"></i>
                <h2>Teacher</h2>
                <p class="muted">Create subjects, build quizzes, and track progress</p>
            </div>
            <div class="role-card" id="openAdmin">
                <i class="bi bi-shield-lock role-icon"></i>
                <h2>Admin</h2>
                <p class="muted">Manage teachers, students, and system settings</p>
            </div>
            <div class="role-card" id="openStudent">
                <i class="bi bi-pencil-square role-icon"></i>
                <h2>Student</h2>
                <p class="muted">Join subjects, attempt quizzes, and view scores</p>
            </div>
        </div>
    </div>
</section>

<section id="aboutPage" class="page">
    <div class="container py-5">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-primary">About This Application</h2>
            <p class="lead text-muted">Project Goals, Features, and Technology Stack</p>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-body p-4">
                <h4 class="card-title"><i class="bi bi-bullseye me-2"></i>Project Goal</h4>
                <p class="card-text">This is a full-stack web application built from scratch to serve as a complete quiz management system for an educational department. It supports three distinct user roles (Admin, Teacher, and Student) with a secure backend and a dynamic frontend.</p>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-lg-7">
                <div class="card shadow-sm h-100">
                    <div class="card-body p-4">
                        <h4 class="card-title"><i class="bi bi-list-check me-2"></i>Core Features</h4>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Admin:</strong> Full user management, password resets, and a statistical dashboard.</li>
                            <li class="list-group-item"><strong>Teacher:</strong> Full content lifecycle management for subjects, modules, and quizzes with detailed analytics.</li>
                            <li class="list-group-item"><strong>Student:</strong> A complete workflow including subject enrollment, attempting quizzes, and viewing score history.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="card shadow-sm h-100">
                    <div class="card-body p-4">
                        <h4 class="card-title"><i class="bi bi-stack me-2"></i>Technology Stack</h4>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Frontend:</strong> Vanilla JavaScript (ES6+), HTML5, Custom CSS</li>
                            <li class="list-group-item"><strong>Backend:</strong> Node.js with the Express.js framework</li>
                            <li class="list-group-item"><strong>Database:</strong> MySQL</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-5">
            <button class="btn btn-outline-secondary" id="about-back-btn">Back to Home</button>
        </div>
    </div>
</section>

<section id="teacherAuth" class="page">
  <div class="card  auth-card">
    <div style="display:flex;gap:14px;align-items:center;flex-wrap:wrap">
      <div style="flex:1">
        <h3 style="margin:0;color:var(--primary)">Teacher Login</h3>
        <div class="subtle">Sign in with your email and password</div>
      </div>
      <div style="display:flex;gap:8px">
        <span class="link" id="t-back">Back</span>
      </div>
    </div>
    <form id="teacherLoginForm" style="margin-top:14px">
      <div class="form-grid">
        <div class="full">
          <label>Email</label>
          <input id="t-login-email" type="email" required>
        </div>
        <div class="full">
          <label>Password</label>
          <input id="t-login-password" type="password" minlength="6" required>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn" type="submit">Login</button>
        <button class="ghost" type="button" id="t-forgot">Forgot Password</button>
      </div>
    </form>
  </div>
  </section>

<section id="studentAuth" class="page">
  <div class="card  auth-card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <h3 style="margin:0;color:var(--primary)">Student Login</h3>
        <div class="subtle">Sign in with your email and password</div>
      </div>
      <div style="display:flex;gap:8px">
        <span class="link" id="s-back">Back</span>
      </div>
    </div>
    <form id="studentLoginForm" style="margin-top:14px">
      <div class="form-grid">
        <div class="full">
          <label>Email</label>
          <input id="s-login-email" type="email" required>
        </div>
        <div class="full">
          <label>Password</label>
          <input id="s-login-password" type="password" minlength="6" required>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn" type="submit">Login</button>
        <button class="ghost" type="button" id="s-forgot">Forgot Password</button>
      </div>
    </form>
  </div>
    </section>

<section id="adminAuth" class="page">
    <div class="card  auth-card">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <h3 style="margin:0;color:var(--primary)">Admin Login</h3>
                <div class="subtle">Sign in with your administrator credentials.</div>
            </div>
            <span class="link" id="admin-back">Back</span>
        </div>
        <form id="adminLoginForm" style="margin-top:14px">
            <div class="form-grid">
                <div class="full">
                    <label>Email</label>
                    <input id="admin-login-email" type="email" required value="admin@app.com">
                </div>
                <div class="full">
                    <label>Password</label>
                    <input id="admin-login-password" type="password" minlength="6" required value="admin123">
                </div>
            </div>
            <div class="form-actions">
                <button class="btn" type="submit">Login as Admin</button>
            </div>
        </form>
    </div>
</section>
<section id="teacherDash" class="page">
  <div class="dash-header">
    <div>
      <h2 style="margin:0;color:var(--primary)">Teacher Dashboard</h2>
      <div class="muted">Create and manage your subjects, modules, and quizzes.</div>
    </div>
    <div class="controls">
      <span class="muted" id="teacherNameDisplay"></span>
      <button class="btn" id="createSubjectBtn">+ Create Subject</button>
      <button class="ghost" id="logoutTeacher">Logout</button>
    </div>
  </div>
  <div class="card  auth-card">
    <h3 style="margin-top:0">Your Subjects</h3>
    <div id="teacherSubjects" class="subject-grid mt8"></div>
    <!-- <div id="noSubjects" class="muted center mt8" style="display:none">No subjects yet — create one to get started!</div> -->
    <div id="noSubjects" class="empty-state" style="display:none;">
      <i class="bi bi-journal-plus empty-state-icon"></i>
      <h4 class="empty-state-heading">No Subjects Yet</h4>
      <p class="empty-state-text">Click the "+ Create Subject" button to add your first course and get started.</p>
    </div> 
  </div>
</section>

<section id="studentDash" class="page">
    <div class="dash-header">
        <div>
            <h2 style="margin:0;color:var(--primary)">Student Dashboard</h2>
            <p class="muted">Join subjects and track your progress.</p>
        </div>
        <div class="controls">
            <span class="muted" id="studentNameDisplay"></span>
            <input id="joinCodeInput" placeholder="Enter Subject Code" style="padding:8px;border-radius:8px;border:1px solid #ddd"/>
            <button class="btn" id="joinBtn">Join</button>
            <button class="ghost" id="viewMyScoresBtn">My Scores</button>
            <button class="ghost" id="profileBtn">Profile</button>
            <!-- <button class="ghost" id="logoutStudent">Logout</button> -->
              <button class="btn" id="printReportBtn">Print Report</button> <button class="ghost" id="logoutStudent">Logout</button>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <i class="bi bi-graph-up"></i>
            <div>
                <div class="stat-value"><span id="avgScore">0</span>%</div>
                <div class="stat-label">Average Score</div>
            </div>
        </div>
        <div class="stat-card">
            <i class="bi bi-card-checklist"></i>
            <div>
                <div class="stat-value" id="quizzesTaken">0</div>
                <div class="stat-label">Quizzes Taken</div>
            </div>
        </div>
        <div class="stat-card">
            <i class="bi bi-trophy-fill"></i>
            <div>
                <div class="stat-value" id="bestSubject">N/A</div>
                <div class="stat-label">Best Subject</div>
            </div>
        </div>
    </div>

    <div class="dash-grid">
        <div class="card  auth-card">
            <h3 style="margin:0 0 8px 0">Enrolled Subjects</h3>
            <div id="studentSubjectsGrid" class="subject-grid"></div>
            <div id="noJoined" class="muted center mt8" style="display:none">You haven't joined any subjects yet.</div>
        </div>
        <div class="card  auth-card">
            <h3 style="margin:0 0 8px 0">Recent Activity</h3>
            <ul class="activity-list" id="activityFeed">
            </ul>
        </div>
    </div>
</section>

<section id="adminDash" class="page">
    <div class="dash-header">
        <div>
            <h2 style="margin:0;color:var(--primary)">Admin Dashboard</h2>
            <div class="muted">Manage all users in the system.</div>
        </div>
        <div class="controls">
            <span class="muted" id="adminNameDisplay"></span>
            <button class="ghost" id="logoutAdmin">Logout</button>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card"><i class="bi bi-person-video3"></i><div><div class="stat-value" id="teacherCount">0</div><div class="stat-label">Total Teachers</div></div></div>
        <div class="stat-card"><i class="bi bi-people-fill"></i><div><div class="stat-value" id="studentCount">0</div><div class="stat-label">Total Students</div></div></div>
        <div class="stat-card"><i class="bi bi-journal-bookmark-fill"></i><div><div class="stat-value" id="subjectCount">0</div><div class="stat-label">Total Subjects</div></div></div>
    </div>

    <div class="dash-grid">
        <div>
            <div class="card">
                <div class="card-header-controls">
                    <h3 style="margin:0;">Manage Teachers</h3>
                    <input type="search" id="teacherSearch" placeholder="Search teachers...">
                </div>
                <table style="width:100%;">
                    <thead><tr><th>Name</th><th>Email</th><th>Actions</th></tr></thead>
                    <tbody id="teachersTableBody"></tbody>
                </table>
                <div class="pagination-controls" id="teacherPagination"></div>
            </div>
            <div class="card">
                <div class="card-header-controls">
                    <h3 style="margin:0;">Manage Students</h3>
                    <input type="search" id="studentSearch" placeholder="Search students...">
                </div>
                <table style="width:100%;">
                    <thead><tr><th>Name</th><th>Email</th><th>Actions</th></tr></thead>
                    <tbody id="studentsTableBody"></tbody>
                </table>
                <div class="pagination-controls" id="studentPagination"></div>
            </div>
        </div>

        <div>
            <div class="card">
                <h3 style="margin-top:0">Add New User</h3>
                <form id="addUserForm">
                    <div class="form-grid full"> <div><label>Full Name</label><input id="add-user-name" type="text" required></div>
                        <div><label>Email</label><input id="add-user-email" type="email" required></div>
                        <div><label>Password</label><input id="add-user-password" type="password" required></div>
                        <div>
                            <label>Role</label>
                            <select id="add-user-role" required>
                                <option value="teacher">Teacher</option>
                                <option value="student">Student</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn" type="submit">+ Add User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<section id="profilePage" class="page">
    <div class="dash-header">
        <div>
            <h2 style="margin:0;color:var(--primary)">My Profile</h2>
            <p class="muted">View your details and change your password.</p>
        </div>
        <button class="ghost" id="profile-back-btn">Back to Dashboard</button>
    </div>

    <div class="card  auth-card">
        <h3>Account Details</h3>
        <p><strong>Name:</strong> <span id="profile-name"></span></p>
        <p><strong>Email:</strong> <span id="profile-email"></span></p>
        <p><strong>Role:</strong> <span id="profile-role"></span></p>
    </div>

    <div class="card  auth-card">
        <h3>Change Password</h3>
        <form id="changePasswordForm">
            <div class="form-grid">
                <div class="full">
                    <label>Current Password</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="full">
                    <label>New Password (min. 6 characters)</label>
                    <input type="password" id="newPassword" minlength="6" required>
                </div>
                <div class="full">
                    <label>Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" minlength="6" required>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn">Update Password</button>
            </div>
        </form>
    </div>
</section>

<div id="overlay" style="display:none" class="overlay"></div>

<footer class="main-footer">
    <div class="footer-container">
        <p>&copy; 2025 Department Quiz Application. All Rights Reserved.</p>
    </div>
</footer>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="script.js"></script>

</body>
</html>